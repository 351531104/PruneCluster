{"version":3,"file":"PruneCluster.min.js","sources":["PruneCluster.js"],"names":["__extends","this","d","b","__","constructor","p","hasOwnProperty","prototype","PruneCluster","_PruneCluster","checkPositionInsideBounds","a","lat","minLat","maxLat","lng","minLng","maxLng","insertionSort","list","j","tmp","tmpLng","i","length","position","ratioForNativeSort","Point","ClusterObject","Marker","_super","data","category","weight","filtered","call","Move","SetData","Cluster","marker","stats","ENABLE_MARKERS_LIST","_clusterMarkers","lastMarker","population","undefined","totalWeight","averagePosition","AddMarker","push","currentTotalWeight","newWeight","Reset","ComputeBounds","cluster","proj","Project","size","Size","nbX","Math","floor","x","nbY","y","startX","startY","UnProject","bounds","GetClusterMarkers","ApplyCluster","newCluster","min","max","concat","_markers","_nbChanges","_clusters","ViewPadding","RegisterMarker","_removeFlag","_sortMarkers","markers","sort","_sortClusters","_indexLowerBoundLng","it","step","first","count","_resetClusterViews","l","ProcessView","heightBuffer","abs","widthBuffer","extendedBounds","firstIndex","clusters","workingClusterList","slice","markerPosition","clusterFound","ll","splice","newClustersList","RemoveMarkers","newMarkersList","FindMarkersInArea","area","aMinLat","aMaxLat","aMinLng","aMaxLng","result","pos","rMinLat","Number","MAX_VALUE","rMaxLat","rMinLng","rMaxLng","FindMarkersBoundsInArea","ComputeGlobalBounds","GetMarkers","ResetClusters","PruneClusterForLeaflet","L","Layer","Class","extend","initialize","clusterMargin","_this","_map","project","LatLng","unproject","_objectsOnMap","spiderfier","PruneClusterLeafletSpiderfier","BuildLeafletCluster","m","icon","BuildLeafletClusterIcon","on","markersArea","LatLngBounds","zoomLevelBefore","getZoom","zoomLevelAfter","getBoundsZoom","fire","center","getLatLng","setView","fitBounds","c","iconSize","DivIcon","html","className","point","BuildLeafletMarker","PrepareLeafletMarker","onAdd","map","_moveStart","_moveEnd","_zoomStart","_zoomEnd","addLayer","onRemove","off","removeLayer","_leafletMarker","_moveInProgress","e","_hardMove","hard","_zoomInProgress","getBounds","zoom","marginRatio","southWest","getSouthWest","northEast","getNorthEast","objectsOnMap","newObjectsOnMap","_removeFromMap","clusterCreationList","opacityUpdateList","workingList","icluster","latMargin","lngMargin","oldMaxLng","oldMinLat","oldMaxLat","newMinLng","newMinLat","newMaxLat","_leafletCollision","forEach","_leafletOldPopulation","oldMarker","_zoomLevel","setLatLng","_leafletPosition","equals","setIcon","_population","toRemove","remove","pa","jcluster","pb","oldMinLng","newMaxLng","setOpacity","creationMarker","iposition","addTo","window","setTimeout","FitBounds","_2PI","PI","_circleFootSeparation","_circleStartAngle","_spiralFootSeparation","_spiralLengthStart","_spiralLengthFactor","_spiralCountTrigger","spiderfyDistanceMultiplier","_cluster","_currentMarkers","_multiLines","multiPolyline","_lines","color","polyline","Spiderfy","Unspiderfy","_currentCenter","points","centerPoint","latLngToLayerPoint","_generatePointsSpiral","_generatePointsCircle","polylines","leafletMarkers","projectedPoints","layerPointToLatLng","setZIndexOffset","startTime","Date","interval","duration","anim","setInterval","now","clearInterval","stepRatio","diffLat","diffLng","setLatLngs","_clusterMarker","centerPt","angle","circumference","legLength","angleStep","res","round","cos","sin","separation","lengthFactor"],"mappings":"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"}