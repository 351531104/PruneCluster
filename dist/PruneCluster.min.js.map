{"version":3,"file":"PruneCluster.min.js","sources":["PruneCluster.js"],"names":["__extends","this","d","b","__","constructor","p","hasOwnProperty","prototype","PruneCluster","_PruneCluster","checkPositionInsideBounds","a","lat","minLat","maxLat","lng","minLng","maxLng","insertionSort","list","j","tmp","tmpLng","i","length","position","ratioForNativeSort","Point","ClusterObject","Marker","_super","data","category","weight","filtered","call","Move","Cluster","marker","stats","ENABLE_MARKERS_LIST","_clusterMarkers","lastMarker","population","undefined","totalWeight","averagePosition","AddMarker","push","currentTotalWeight","newWeight","Reset","ComputeBounds","cluster","proj","Project","size","Size","nbX","Math","floor","x","nbY","y","startX","startY","UnProject","bounds","GetClusterMarkers","ApplyCluster","newCluster","min","max","concat","_markers","_nbChanges","_clusters","ViewPadding","RegisterMarker","_removeFlag","_sortMarkers","markers","sort","_sortClusters","_indexLowerBoundLng","it","step","first","count","_resetClusterViews","l","ProcessView","heightBuffer","abs","widthBuffer","extendedBounds","firstIndex","clusters","workingClusterList","slice","markerPosition","clusterFound","ll","splice","newClustersList","RemoveMarkers","newMarkersList","FindMarkersInArea","area","aMinLat","aMaxLat","aMinLng","aMaxLng","result","pos","rMinLat","Number","MAX_VALUE","rMaxLat","rMinLng","rMaxLng","FindMarkersBoundsInArea","ComputeGlobalBounds","GetMarkers","ResetClusters","PruneClusterForLeaflet","L","Layer","Class","extend","initialize","clusterMargin","_this","_map","project","LatLng","unproject","_objectsOnMap","spiderfier","PruneClusterLeafletSpiderfier","BuildLeafletCluster","m","icon","BuildLeafletClusterIcon","on","markersArea","LatLngBounds","zoomLevelBefore","getZoom","zoomLevelAfter","getBoundsZoom","fire","center","getLatLng","setView","fitBounds","c","iconSize","DivIcon","html","className","point","BuildLeafletMarker","PrepareLeafletMarker","onAdd","map","_moveStart","_moveEnd","_zoomStart","_zoomEnd","addLayer","onRemove","off","removeLayer","_leafletMarker","_moveInProgress","e","_hardMove","hard","_zoomInProgress","getBounds","zoom","marginRatio","southWest","getSouthWest","northEast","getNorthEast","objectsOnMap","newObjectsOnMap","_removeFromMap","clusterCreationList","opacityUpdateList","workingList","icluster","latMargin","lngMargin","oldMaxLng","oldMinLat","oldMaxLat","newMinLng","newMinLat","newMaxLat","_leafletCollision","forEach","_leafletOldPopulation","oldMarker","_zoomLevel","setLatLng","_leafletPosition","equals","setIcon","_population","toRemove","remove","pa","jcluster","pb","oldMinLng","newMaxLng","setOpacity","creationMarker","iposition","addTo","window","setTimeout","FitBounds","_2PI","PI","_circleFootSeparation","_circleStartAngle","_spiralFootSeparation","_spiralLengthStart","_spiralLengthFactor","_spiralCountTrigger","spiderfyDistanceMultiplier","_cluster","_currentMarkers","_multiLines","multiPolyline","_lines","color","polyline","Spiderfy","Unspiderfy","_currentCenter","points","centerPoint","latLngToLayerPoint","_generatePointsSpiral","_generatePointsCircle","polylines","leafletMarkers","projectedPoints","layerPointToLatLng","setZIndexOffset","startTime","Date","interval","duration","anim","setInterval","now","clearInterval","stepRatio","diffLat","diffLng","setLatLngs","_clusterMarker","centerPt","angle","circumference","legLength","angleStep","res","round","cos","sin","separation","lengthFactor"],"mappings":"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"}